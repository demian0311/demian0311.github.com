<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Scala Encoding Fun</title>
        <meta name="viewport" content="width=device-width"/>
        <link href='http://fonts.googleapis.com/css?family=Roboto' 
            rel='stylesheet' type='text/css'>
            
        <link rel="stylesheet" href="/css/syntax.css"/>
        <link rel="stylesheet" href="/css/main.css" type="text/css" media="screen"/>
        <link rel="stylesheet" href="/css/print.css" type="text/css" media="print"/>
    </head>
    <body>
        <div class="site">
          <div class="header">
            <h1><a href="/">Demian Neidetcher</a> | Scala Encoding Fun</h1>
          </div>
          <div class="post">
<p>I pulled a toy Scala <a href="https://github.com/demian0311/scalakata">project</a> into Eclipse and saw this 
problem:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">IO error while decoding [file].scala with UTF-8 Please try specifying another one using the -encoding option
</code></pre></div>
<p><a href="http://p5wscala.wordpress.com/tag/encoding/">This guy</a> didn&#39;t have the exact solution but he got me pointed in the right direction.  The problem is that 
I must have copied in some non-UTF-8 characters into my source code.  At this point the Scala compiler
got confused.</p>

<p>Here&#39;s a bunch of shell commands I did to fix the problem:</p>

<h3>Figure out the character set of the file we&#39;re having trouble with</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">~/code/scalakata&gt;file -I ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala
./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala: text/x-java; charset=iso-8859-1
</code></pre></div>
<p>Yep, the old iso-8859-1, that&#39;s not what we want.  That&#39;s what we use as the <em>from</em> encoding.</p>

<h3>Make a copy of the offending file UTF-8</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">~/code/scalakata&gt;iconv -f iso-8859-1 -t utf-8 ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala &gt; ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala.utf8
</code></pre></div>
<h3>The diff command will show you what the offending line was</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">~/code/scalakata&gt;diff ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala.utf8
134c134
&lt;       // 4) Scala lets you multiply a string with a number?try out &quot;crazy&quot; * 3 in the REPL. What does this operation do? Where can you find it in Scaladoc?
---
&gt;       // 4) Scala lets you multiply a string with a number√ëtry out &quot;crazy&quot; * 3 in the REPL. What does this operation do? Where can you find it in Scaladoc?
</code></pre></div>
<h3>Now actually replace the old file</h3>
<div class="highlight"><pre><code class="text language-text" data-lang="text">~/code/scalakata&gt;mv ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala.utf8 ./src/test/scala/com/neidetcher/sfti/Chapter1Test.scala
</code></pre></div>
<p>After that I was back in business.</p>

</div>

          <div class="footer">
          <div class="printonly">http://neidetcher.com/programming/2012/03/15/scala-encoding-fun.html</div>
          This work is licensed under a 
          <a rel="license" 
            href="http://creativecommons.org/licenses/by/4.0/deed.en_US"
            >Creative Commons Attribution 4.0 International License</a>.
          </div>
        </div>
    </body>
</html>
